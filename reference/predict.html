<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Predict indicator scores — predict • cSEM</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Predict indicator scores — predict"><meta name="description" content="maturing"><meta property="og:description" content="maturing"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cSEM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0.9999</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/cSEM.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Notation.html">Notation</a></li>
    <li><a class="dropdown-item" href="../articles/Terminology.html">Terminology</a></li>
    <li><a class="dropdown-item" href="../articles/Using-assess.html">Postestimation: Assessing a model</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/FloSchuberth/cSEM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Predict indicator scores</h1>
      <small class="dont-index">Source: <a href="https://github.com/FloSchuberth/cSEM/blob/master/R/postestimate_predict.R" class="external-link"><code>R/postestimate_predict.R</code></a></small>
      <div class="d-none name"><code>predict.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>maturing</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">predict</span><span class="op">(</span></span>
<span> .object                   <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span> .benchmark                <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lm"</span>, <span class="st">"unit"</span>, <span class="st">"PLS-PM"</span>, <span class="st">"GSCA"</span>, <span class="st">"PCA"</span>, <span class="st">"MAXVAR"</span>, <span class="st">"NA"</span><span class="op">)</span>,</span>
<span> .approach_predict         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"earliest"</span>, <span class="st">"direct"</span><span class="op">)</span>,</span>
<span> .cv_folds                 <span class="op">=</span> <span class="fl">10</span>,</span>
<span> .handle_inadmissibles     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"stop"</span>, <span class="st">"ignore"</span>, <span class="st">"set_NA"</span><span class="op">)</span>,</span>
<span> .r                        <span class="op">=</span> <span class="fl">1</span>,</span>
<span> .test_data                <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span> .approach_score_target    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"median"</span>, <span class="st">"mode"</span><span class="op">)</span>,</span>
<span> .sim_points               <span class="op">=</span> <span class="fl">100</span>,</span>
<span> .disattenuate             <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span> .treat_as_continuous      <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span> .approach_score_benchmark <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"median"</span>, <span class="st">"mode"</span>, <span class="st">"round"</span><span class="op">)</span>,</span>
<span> .seed                     <span class="op">=</span> <span class="cn">NULL</span></span>
<span> <span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--object">.object<a class="anchor" aria-label="anchor" href="#arg--object"></a></dt>
<dd><p>An R object of class <a href="csem_results.html">cSEMResults</a> resulting from a call to <code><a href="csem.html">csem()</a></code>.</p></dd>


<dt id="arg--benchmark">.benchmark<a class="anchor" aria-label="anchor" href="#arg--benchmark"></a></dt>
<dd><p>Character string. The procedure to obtain benchmark predictions.
One of "<em>lm</em>", "<em>unit</em>", "<em>PLS-PM</em>", "<em>GSCA</em>", "<em>PCA</em>", "<em>MAXVAR</em>", or "<em>NA</em>".
Default to "<em>lm</em>".</p></dd>


<dt id="arg--approach-predict">.approach_predict<a class="anchor" aria-label="anchor" href="#arg--approach-predict"></a></dt>
<dd><p>Character string. Which approach should be used to perform
predictions? One of "<em>earliest</em>" and "<em>direct</em>". If "<em>earliest</em>" predictions
for indicators associated to endogenous constructs are performed using only
indicators associated to exogenous constructs. If "<em>direct</em>", predictions for
indicators associated to endogenous constructs are based on indicators associated
to their direct antecedents. Defaults to "<em>earliest</em>".</p></dd>


<dt id="arg--cv-folds">.cv_folds<a class="anchor" aria-label="anchor" href="#arg--cv-folds"></a></dt>
<dd><p>Integer. The number of cross-validation folds to use. Setting
<code>.cv_folds</code> to <code>N</code> (the number of observations) produces
leave-one-out cross-validation samples. Defaults to <code>10</code>.</p></dd>


<dt id="arg--handle-inadmissibles">.handle_inadmissibles<a class="anchor" aria-label="anchor" href="#arg--handle-inadmissibles"></a></dt>
<dd><p>Character string. How should inadmissible results
be treated? One of "<em>stop</em>", "<em>ignore</em>", or "<em>set_NA</em>". If "<em>stop</em>", <code>predict()</code>
will stop immediately if estimation yields an inadmissible result.
For "<em>ignore</em>" all results are returned even if all or some of the estimates
yielded inadmissible results.
For "<em>set_NA</em>" predictions based on inadmissible parameter estimates are
set to <code>NA</code>. Defaults to "<em>stop</em>"</p></dd>


<dt id="arg--r">.r<a class="anchor" aria-label="anchor" href="#arg--r"></a></dt>
<dd><p>Integer. The number of repetitions to use. Defaults to <code>1</code>.</p></dd>


<dt id="arg--test-data">.test_data<a class="anchor" aria-label="anchor" href="#arg--test-data"></a></dt>
<dd><p>A matrix of test data with the same column names as the
training data.</p></dd>


<dt id="arg--approach-score-target">.approach_score_target<a class="anchor" aria-label="anchor" href="#arg--approach-score-target"></a></dt>
<dd><p>Character string. How should the aggregation of the estimates of
the truncated normal distribution for the predictions using OrdPLS/OrdPLSc be done?
One of "<em>mean</em>", "<em>median</em>" or "<em>mode</em>".
If "<em>mean</em>", the mean of the estimated endogenous indicators is calculated.
If "<em>median</em>", the mean of the estimated endogenous indicators is calculated.
If "<em>mode</em>", the maximum empirical density on the intervals defined by the thresholds
is used. Defaults to "<em>mean</em>".</p></dd>


<dt id="arg--sim-points">.sim_points<a class="anchor" aria-label="anchor" href="#arg--sim-points"></a></dt>
<dd><p>Integer. How many samples from the truncated normal distribution should
be simulated to estimate the exogenous construct scores? Defaults to "<em>100</em>".</p></dd>


<dt id="arg--disattenuate">.disattenuate<a class="anchor" aria-label="anchor" href="#arg--disattenuate"></a></dt>
<dd><p>Logical. Should the benchmark predictions be based on
disattenuated parameter estimates? Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg--treat-as-continuous">.treat_as_continuous<a class="anchor" aria-label="anchor" href="#arg--treat-as-continuous"></a></dt>
<dd><p>Logical. Should the indicators for the benchmark predictions
be treated as continuous? If <code>TRUE</code> all indicators are treated as continuous and PLS-PM/PLSc is applied.
If <code>FALSE</code> OrdPLS/OrdPLSc is applied. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg--approach-score-benchmark">.approach_score_benchmark<a class="anchor" aria-label="anchor" href="#arg--approach-score-benchmark"></a></dt>
<dd><p>Character string. How should the aggregation
of the estimates of the truncated normal distribution be done for the
benchmark predictions? Ignored if not OrdPLS or OrdPLSc is used to obtain benchmark predictions.
One of "<em>mean</em>", "<em>median</em>", "<em>mode</em>" or "<em>round</em>".
If "<em>round</em>", the benchmark predictions are obtained using the traditional prediction
algorithm for PLS-PM which are rounded for categorical indicators.
If "<em>mean</em>", the mean of the estimated endogenous indicators is calculated.
If "<em>median</em>", the mean of the estimated endogenous indicators is calculated.
If "<em>mode</em>", the maximum empirical density on the intervals defined by the thresholds
is used.
If <code>.treat_as_continuous = TRUE</code> or if all indicators are on a continuous scale,
<code>.approach_score_benchmark</code> is ignored. Defaults to "<em>round</em>".</p></dd>


<dt id="arg--seed">.seed<a class="anchor" aria-label="anchor" href="#arg--seed"></a></dt>
<dd><p>Integer or <code>NULL</code>. The random seed to use. Defaults to <code>NULL</code> in which
case an arbitrary seed is chosen. Note that the scope of the seed is limited
to the body of the function it is used in. Hence, the global seed will
not be altered!</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>cSEMPredict</code> with print and plot methods.
Technically, <code>cSEMPredict</code> is a
named list containing the following list elements:</p>
<dl><dt><code>$Actual</code></dt>
<dd><p>A matrix of the actual values/indicator scores of the endogenous constructs.</p></dd>

<dt><code>$Prediction_target</code></dt>
<dd><p>A list containing matrices of the predicted indicator
scores of the endogenous constructs based on the target model for each repetition
.r. Target refers to procedure used to estimate the parameters in <code>.object</code>.</p></dd>

<dt><code>$Residuals_target</code></dt>
<dd><p>A list of matrices of the residual indicator scores
of the endogenous constructs based on the target model in each repetition .r.</p></dd>

<dt><code>$Residuals_benchmark</code></dt>
<dd><p>A list of matrices of the residual indicator scores
of the endogenous constructs based on a model estimated by the procedure
given to <code>.benchmark</code> for each repetition .r.</p></dd>

<dt><code>$Prediction_metrics</code></dt>
<dd><p>A data frame containing the predictions metrics
MAE, RMSE, Q2_predict, the misclassification error rate (MER), the MAPE, the MSE2,
Theil's forecast accuracy (U1), Theil's forecast quality (U2), Bias proportion
of MSE (UM), Regression proportion of MSE (UR), and disturbance proportion
of MSE (UD) Hora2015,Watson2002cSEM.</p></dd>

<dt><code>$Information</code></dt>
<dd><p>A list with elements
<code>Target</code>, <code>Benchmark</code>,
<code>Number_of_observations_training</code>, <code>Number_of_observations_test</code>, <code>Number_of_folds</code>,
<code>Number_of_repetitions</code>, and <code>Handle_inadmissibles</code>.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The predict function implements the procedure introduced by Shmueli2016;textualcSEM in the PLS context
known as "PLSPredict" Shmueli2019cSEM including its variants PLScPredcit, OrdPLSpredict and OrdPLScpredict.
It is used to predict the indicator scores of endogenous constructs and to evaluate the out-of-sample predictive power
of a model.
For that purpose, the predict function uses k-fold cross-validation to randomly
split the data into training and test datasets, and subsequently predicts the
values of the test data based on the model parameter estimates obtained
from the training data. The number of cross-validation folds is 10 by default but
may be changed using the <code>.cv_folds</code> argument.
By default, the procedure is not repeated (<code>.r = 1</code>). You may choose to repeat
cross-validation by setting a higher <code>.r</code> to be sure not to have a particular
(unfortunate) split. See Shmueli2019;textualcSEM for
details. Typically <code>.r = 1</code> should be sufficient though.</p>
<p>Alternatively, users may supply a test dataset as matrix or a data frame of <code>.test_data</code> with
the same column names as those in the data used to obtain <code>.object</code> (the training data).
In this case, arguments <code>.cv_folds</code> and <code>.r</code> are
ignored and predict uses the estimated coefficients from <code>.object</code> to
predict the values in the columns of <code>.test_data</code>.</p>
<p>In Shmueli2016;textualcSEM PLS-based predictions for indicator <code>i</code>
are compared to the predictions based on a multiple regression of indicator <code>i</code>
on all available exogenous indicators (<code>.benchmark = "lm"</code>) and
a simple mean-based prediction summarized in the Q2_predict metric.
<code>predict()</code> is more general in that is allows users to compare the predictions
based on a so-called target model/specification to predictions based on an
alternative benchmark. Available benchmarks include predictions
based on a linear model, PLS-PM weights, unit weights (i.e. sum scores),
GSCA weights, PCA weights, and MAXVAR weights.</p>
<p>Each estimation run is checked for admissibility using <code><a href="verify.html">verify()</a></code>. If the
estimation yields inadmissible results, <code>predict()</code> stops with an error (<code>"stop"</code>).
Users may choose to <code>"ignore"</code> inadmissible results or to simply set predictions
to <code>NA</code> (<code>"set_NA"</code>) for the particular run that failed.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="csem.html">csem</a>, <a href="csem_results.html">cSEMResults</a>, <code><a href="exportToExcel.html">exportToExcel()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">### Anime example taken from https://github.com/ISS-Analytics/pls-predict/</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Anime</span><span class="op">)</span> <span class="co"># data is similar to the Anime.csv found on </span></span></span>
<span class="r-in"><span>            <span class="co"># https://github.com/ISS-Analytics/pls-predict/ but with irrelevant</span></span></span>
<span class="r-in"><span>            <span class="co"># columns removed</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Split into training and data the same way as it is done on </span></span></span>
<span class="r-in"><span><span class="co"># https://github.com/ISS-Analytics/pls-predict/</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">index</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample.int</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">Anime</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">83</span>, replace <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat_train</span> <span class="op">&lt;-</span> <span class="va">Anime</span><span class="op">[</span><span class="op">-</span><span class="va">index</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">dat_test</span>  <span class="op">&lt;-</span> <span class="va">Anime</span><span class="op">[</span><span class="va">index</span>, <span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specify model</span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">"</span></span></span>
<span class="r-in"><span><span class="st"># Structural model</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st">ApproachAvoidance ~ PerceivedVisualComplexity + Arousal</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st"># Measurement/composite model</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st">ApproachAvoidance         =~ AA0 + AA1 + AA2 + AA3</span></span></span>
<span class="r-in"><span><span class="st">PerceivedVisualComplexity &lt;~ VX0 + VX1 + VX2 + VX3 + VX4</span></span></span>
<span class="r-in"><span><span class="st">Arousal                   &lt;~ Aro1 + Aro2 + Aro3 + Aro4</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Estimate (replicating the results of the `simplePLS()` function)</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="csem.html">csem</a></span><span class="op">(</span><span class="va">dat_train</span>, </span></span>
<span class="r-in"><span>            <span class="va">model</span>, </span></span>
<span class="r-in"><span>            .disattenuate <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># original PLS</span></span></span>
<span class="r-in"><span>            .iter_max <span class="op">=</span> <span class="fl">300</span>, </span></span>
<span class="r-in"><span>            .tolerance <span class="op">=</span> <span class="fl">1e-07</span>, </span></span>
<span class="r-in"><span>            .PLS_weight_scheme_inner <span class="op">=</span> <span class="st">"factorial"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Predict using a user-supplied training data set</span></span></span>
<span class="r-in"><span><span class="va">pp</span> <span class="op">&lt;-</span> <span class="fu">predict</span><span class="op">(</span><span class="va">res</span>, .test_data <span class="op">=</span> <span class="va">dat_test</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The following warning occured in the `predict()` function:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Disattenuation is not applicable to benchmark `lm` and ignored.</span>
<span class="r-in"><span><span class="va">pp</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ________________________________________________________________________________</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----------------------------------- Overview -----------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Number of obs. training            = 100</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Number of obs. test                = 83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Number of cv folds                 = NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Number of repetitions              = 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Handle inadmissibles               = stop</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Estimator target                   = 'PLS-PM'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Estimator benchmark                = 'lm'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Disattenuation target              = 'FALSE'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Disattenuation benchmark           = 'FALSE'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Approach to predict                = 'earliest'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ------------------------------ Prediction metrics ------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Name    MAE target  MAE benchmark  RMSE target RMSE benchmark   Q2_predict</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   AA0         1.2125         1.1621       1.5575         1.5045       0.4625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   AA1         1.5319         1.5711       1.9005         1.9829       0.2794</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   AA2         0.9891         0.9804       1.3993         1.4029       0.4396</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   AA3         1.0564         1.0472       1.4434         1.4787       0.3656</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ________________________________________________________________________________</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Compute prediction metrics  ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="va">res2</span> <span class="op">&lt;-</span> <span class="fu"><a href="csem.html">csem</a></span><span class="op">(</span><span class="va">Anime</span>, <span class="co"># whole data set</span></span></span>
<span class="r-in"><span>            <span class="va">model</span>, </span></span>
<span class="r-in"><span>            .disattenuate <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># original PLS</span></span></span>
<span class="r-in"><span>            .iter_max <span class="op">=</span> <span class="fl">300</span>, </span></span>
<span class="r-in"><span>            .tolerance <span class="op">=</span> <span class="fl">1e-07</span>, </span></span>
<span class="r-in"><span>            .PLS_weight_scheme_inner <span class="op">=</span> <span class="st">"factorial"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Predict using 10-fold cross-validation</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">pp2</span> <span class="op">&lt;-</span> <span class="fu">predict</span><span class="op">(</span><span class="va">res</span>, .benchmark <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pp2</span></span></span>
<span class="r-in"><span><span class="co">## There is a plot method available</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pp2</span><span class="op">)</span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Example using OrdPLScPredict -----------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># Transform the numerical indicators into factors</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"BergamiBagozzi2000"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>cei1    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">cei1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       cei2    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">cei2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       cei3    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">cei3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       cei4    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">cei4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       cei5    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">cei5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       cei6    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">cei6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       cei7    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">cei7</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       cei8    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">cei8</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       ma1     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">ma1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       ma2     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">ma2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       ma3     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">ma3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       ma4     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">ma4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       ma5     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">ma5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       ma6     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">ma6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       orgcmt1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">orgcmt1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       orgcmt2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">orgcmt2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       orgcmt3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">orgcmt3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       orgcmt5 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">orgcmt5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       orgcmt6 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">orgcmt6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       orgcmt7 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">orgcmt7</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       orgcmt8 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">BergamiBagozzi2000</span><span class="op">$</span><span class="va">orgcmt8</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">"</span></span></span>
<span class="r-in"><span><span class="st"># Measurement models</span></span></span>
<span class="r-in"><span><span class="st">OrgPres =~ cei1 + cei2 + cei3 + cei4 + cei5 + cei6 + cei7 + cei8</span></span></span>
<span class="r-in"><span><span class="st">OrgIden =~ ma1 + ma2 + ma3 + ma4 + ma5 + ma6</span></span></span>
<span class="r-in"><span><span class="st">AffJoy  =~ orgcmt1 + orgcmt2 + orgcmt3 + orgcmt7</span></span></span>
<span class="r-in"><span><span class="st">AffLove =~ orgcmt5 + orgcmt 6 + orgcmt8</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st"># Structural model</span></span></span>
<span class="r-in"><span><span class="st">OrgIden ~ OrgPres</span></span></span>
<span class="r-in"><span><span class="st">AffLove ~ OrgIden</span></span></span>
<span class="r-in"><span><span class="st">AffJoy  ~ OrgIden </span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="co"># Estimate using cSEM; note: the fact that indicators are factors triggers OrdPLSc</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="csem.html">csem</a></span><span class="op">(</span>.model <span class="op">=</span> <span class="va">model</span>, .data <span class="op">=</span> <span class="va">data_new</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">250</span>,<span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="summarize.html">summarize</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Predict using OrdPLSPredict</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu">predict</span><span class="op">(</span></span></span>
<span class="r-in"><span>  .object <span class="op">=</span> <span class="va">res</span>, </span></span>
<span class="r-in"><span>  .benchmark <span class="op">=</span> <span class="st">"PLS-PM"</span>,</span></span>
<span class="r-in"><span>  .test_data <span class="op">=</span> <span class="va">data_new</span><span class="op">[</span><span class="op">(</span><span class="fl">251</span><span class="op">)</span><span class="op">:</span><span class="fl">305</span>,<span class="op">]</span>,</span></span>
<span class="r-in"><span>   .treat_as_continuous <span class="op">=</span> <span class="cn">TRUE</span>, .approach_score_target <span class="op">=</span> <span class="st">"median"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pred</span> </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">pred</span><span class="op">$</span><span class="va">Prediction_metrics</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">4</span><span class="op">)</span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Manuel E. Rademaker, Florian Schuberth.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

