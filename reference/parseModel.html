<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Parse lavaan model — parseModel • cSEM</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Parse lavaan model — parseModel"><meta name="description" content="Turns a model written in lavaan model syntax into a
cSEMModel list."><meta property="og:description" content="Turns a model written in lavaan model syntax into a
cSEMModel list."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cSEM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0.9999</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/cSEM.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Notation.html">Notation</a></li>
    <li><a class="dropdown-item" href="../articles/Terminology.html">Terminology</a></li>
    <li><a class="dropdown-item" href="../articles/Using-assess.html">Postestimation: Assessing a model</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/FloSchuberth/cSEM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Parse lavaan model</h1>
      <small class="dont-index">Source: <a href="https://github.com/FloSchuberth/cSEM/blob/master/R/csem_model.R" class="external-link"><code>R/csem_model.R</code></a></small>
      <div class="d-none name"><code>parseModel.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Turns a model written in <a href="https://rdrr.io/pkg/lavaan/man/model.syntax.html" class="external-link">lavaan model syntax</a> into a
<a href="csem_model.html">cSEMModel</a> list.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">parseModel</span><span class="op">(</span></span>
<span>  .model        <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>  .instruments  <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>  .check_errors <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--model">.model<a class="anchor" aria-label="anchor" href="#arg--model"></a></dt>
<dd><p>A model in <a href="https://rdrr.io/pkg/lavaan/man/model.syntax.html" class="external-link">lavaan model syntax</a>
or a <a href="csem_model.html">cSEMModel</a> list.</p></dd>


<dt id="arg--instruments">.instruments<a class="anchor" aria-label="anchor" href="#arg--instruments"></a></dt>
<dd><p>A named list of vectors of instruments. The names
of the list elements are the names of the dependent (LHS) constructs of the structural
equation whose explanatory variables are endogenous. The vectors
contain the names of the instruments corresponding to each equation. Note
that exogenous variables of a given equation <strong>must</strong> be supplied as
instruments for themselves. Defaults to <code>NULL</code>.</p></dd>


<dt id="arg--check-errors">.check_errors<a class="anchor" aria-label="anchor" href="#arg--check-errors"></a></dt>
<dd><p>Logical. Should the model to parse be checked for correctness
in a sense that all necessary components to estimate the model are given?
Defaults to <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <a href="csem_model.html">cSEMModel</a> is a standardized list containing the
following components. J stands for the number of constructs and K for the number
of indicators.</p><dl><dt><code>$structural</code></dt>
<dd><p>A matrix mimicking the structural relationship between
constructs. If constructs are only linearly related, <code>structural</code> is
of dimension (J x J) with row- and column names equal to the construct
names. If the structural model contains nonlinear relationships
<code>structural</code> is (J x (J + J*)) where J* is the number of
nonlinear terms. Rows are ordered such that exogenous constructs are always
first, followed by constructs that only depend on exogenous constructs and/or
previously ordered constructs.</p></dd>

<dt><code>$measurement</code></dt>
<dd><p>A (J x K) matrix mimicking the measurement/composite
relationship between constructs and their related indicators. Rows are in the same
order as the matrix <code>$structural</code> with row names equal to
the construct names. The order of the columns is such that <code>$measurement</code>
forms a block diagonal matrix.</p></dd>

<dt><code>$error_cor</code></dt>
<dd><p>A (K x K) matrix mimicking the measurement error
correlation relationship. The row and column order is identical to
the column order of <code>$measurement</code>.</p></dd>

<dt><code>$cor_specified</code></dt>
<dd><p>A matrix indicating the correlation relationships
between any variables of the model as specified by the user. Mainly for internal purposes.
Note that <code>$cor_specified</code> may also contain inadmissible correlations
such as a correlation between measurement errors indicators and constructs.</p></dd>

<dt><code>$construct_type</code></dt>
<dd><p>A named vector containing the names of each construct
and their respective type ("Common factor" or "Composite").</p></dd>

<dt><code>$construct_order</code></dt>
<dd><p>A named vector containing the names of each construct
and their respective order ("First order" or "Second order").</p></dd>

<dt><code>$model_type</code></dt>
<dd><p>The type of model ("Linear" or "Nonlinear").</p></dd>

<dt><code>$instruments</code></dt>
<dd><p>Only if instruments are supplied: a list of structural
equations relating endogenous RHS variables to instruments.</p></dd>

<dt><code>$indicators</code></dt>
<dd><p>The names of the indicators
(i.e., observed variables and/or first-order constructs)</p></dd>

<dt><code>$cons_exo</code></dt>
<dd><p>The names of the exogenous constructs of the structural model
(i.e., variables that do not appear on the LHS of any structural equation)</p></dd>

<dt><code>$cons_endo</code></dt>
<dd><p>The names of the endogenous constructs of the structural model
(i.e., variables that appear on the LHS of at least one structural equation)</p></dd>

<dt><code>$vars_2nd</code></dt>
<dd><p>The names of the constructs modeled as second orders.</p></dd>

<dt><code>$vars_attached_to_2nd</code></dt>
<dd><p>The names of the constructs forming or building
a second order construct.</p></dd>

<dt><code>$vars_not_attached_to_2nd</code></dt>
<dd><p>The names of the constructs not forming or building
a second order construct.</p></dd>


</dl><p>It is possible to supply an incomplete list to <code>parseModel()</code>, resulting
in an incomplete <a href="csem_model.html">cSEMModel</a> list which can be passed
to all functions that require <code>.csem_model</code> as a mandatory argument. Currently,
only the structural and the measurement matrix are required.
However, specifying an incomplete <a href="csem_model.html">cSEMModel</a> list may lead to unexpected behavior
and errors. Use with care.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Instruments must be supplied separately as a named list
of vectors of instruments.
The names of the list elements are the names of the dependent constructs of
the structural equation whose explanatory variables are endogenous.
The vectors contain the names of the instruments corresponding to each
equation. Note that exogenous variables of a given equation <strong>must</strong> be
supplied as instruments for themselves.</p>
<p>By default <code>parseModel()</code> attempts to check if the model provided is correct
in a sense that all necessary components required to estimate the
model are specified (e.g., a construct of the structural model has at least
1 item). To prevent checking for errors use <code>.check_errors = FALSE</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># ===========================================================================</span></span></span>
<span class="r-in"><span><span class="co"># Providing a model in lavaan syntax </span></span></span>
<span class="r-in"><span><span class="co"># ===========================================================================</span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="st">"</span></span></span>
<span class="r-in"><span><span class="st"># Structural model</span></span></span>
<span class="r-in"><span><span class="st">y1 ~ y2 + y3</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st"># Measurement model</span></span></span>
<span class="r-in"><span><span class="st">y1 =~ x1 + x2 + x3</span></span></span>
<span class="r-in"><span><span class="st">y2 =~ x4 + x5</span></span></span>
<span class="r-in"><span><span class="st">y3 =~ x6 + x7</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st"># Error correlation</span></span></span>
<span class="r-in"><span><span class="st">x1 ~~ x2</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu">parseModel</span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $structural</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    y2 y3 y1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y2  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y3  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y1  1  1  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $measurement</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    x4 x5 x6 x7 x1 x2 x3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y2  1  1  0  0  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y3  0  0  1  1  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y1  0  0  0  0  1  1  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $error_cor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    x4 x5 x6 x7 x1 x2 x3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x4  0  0  0  0  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x5  0  0  0  0  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x6  0  0  0  0  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x7  0  0  0  0  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x1  0  0  0  0  0  1  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x2  0  0  0  0  1  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x3  0  0  0  0  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $cor_specified</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    x1 x2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x1  0  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> x2  1  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $construct_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              y2              y3              y1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Common factor" "Common factor" "Common factor" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $construct_order</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            y2            y3            y1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "First order" "First order" "First order" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $model_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Linear"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $indicators</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "x4" "x5" "x6" "x7" "x1" "x2" "x3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $cons_exo</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "y2" "y3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $cons_endo</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "y1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $vars_2nd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $vars_attached_to_2nd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $vars_not_attached_to_2nd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "y1" "y2" "y3"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "cSEMModel"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ===========================================================================</span></span></span>
<span class="r-in"><span><span class="co"># Providing a complete model in cSEM format (class cSEMModel)</span></span></span>
<span class="r-in"><span><span class="co"># ===========================================================================</span></span></span>
<span class="r-in"><span><span class="co"># If the model is already a cSEMModel object, the model is returned as is:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">m</span>, <span class="fu">parseModel</span><span class="op">(</span><span class="va">m</span><span class="op">)</span><span class="op">)</span> <span class="co"># TRUE</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ===========================================================================</span></span></span>
<span class="r-in"><span><span class="co"># Providing a list </span></span></span>
<span class="r-in"><span><span class="co"># ===========================================================================</span></span></span>
<span class="r-in"><span><span class="co"># It is possible to provide a list that contains at least the</span></span></span>
<span class="r-in"><span><span class="co"># elements "structural" and "measurement". This is generally discouraged</span></span></span>
<span class="r-in"><span><span class="co"># as this may cause unexpected errors.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">m_incomplete</span> <span class="op">&lt;-</span> <span class="va">m</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"structural"</span>, <span class="st">"measurement"</span>, <span class="st">"construct_type"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu">parseModel</span><span class="op">(</span><span class="va">m_incomplete</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $structural</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    y2 y3 y1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y2  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y3  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y1  1  1  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $measurement</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    x4 x5 x6 x7 x1 x2 x3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y2  1  1  0  0  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y3  0  0  1  1  0  0  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> y1  0  0  0  0  1  1  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $construct_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              y2              y3              y1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Common factor" "Common factor" "Common factor" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "cSEMModel"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Providing a list containing list names that are not part of a `cSEMModel`</span></span></span>
<span class="r-in"><span><span class="co"># causes an error:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">m_incomplete</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name_a"</span>, <span class="st">"name_b"</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hello world"</span>, <span class="st">"hello universe"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">parseModel</span><span class="op">(</span><span class="va">m_incomplete</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Failing to provide "structural" or "measurement" also causes an error:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">m_incomplete</span> <span class="op">&lt;-</span> <span class="va">m</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"structural"</span>, <span class="st">"construct_type"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu">parseModel</span><span class="op">(</span><span class="va">m_incomplete</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Manuel E. Rademaker, Florian Schuberth.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

